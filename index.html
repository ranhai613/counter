<head>
  <meta charset="UTF-8">
  <title>文字数カウンター</title>
  <meta name="viewport" content="width=device-width, intial-scale=1, minimun-scale=1, user-scalable=yes">
</head>
 <body>
  <h1>文字数カウンター</h1>
   <form>
    <br><label>
      <input type="checkbox" id="seigencheck">
      <span>字数制限</span>
    </label>
    <input type="number" id="lengthseigen" value="30" min="1">
    <span>字</span>
    <select id="inaiteido">
      <option value="inai">以内</option>
      <option value="teido">程度</option>
    </select>
    <br><span id="show"></span><span id="sitei"></span>
    <br><input type="reset">
    <br><textarea id="text" cols="100vw" rows="50vw"></textarea>
   </form>
    <script>
        function check(){
            var gettext = document.getElementById("text").value;
            getstring = new String(gettext).length;
            document.getElementById("show").innerHTML = getstring + "文字";
            if(seigencheck.checked){
              var seigenmozisuu=(document.getElementById("lengthseigen").value);
              if(document.getElementById("inaiteido").value=="inai"){
                if(Math.ceil(seigenmozisuu*0.8)>getstring){
                  document.getElementById("sitei").innerHTML=", あと"+(Math.ceil(seigenmozisuu*0.8)-getstring)+"字";
                }
                else if(Math.ceil(seigenmozisuu*0.8)<=getstring&&seigenmozisuu>=getstring){
                  document.getElementById("sitei").innerHTML=", ---OK---"+"MAXまであと"+(seigenmozisuu-getstring)+"字";
                }
                else if(seigenmozisuu<getstring){
                  document.getElementById("sitei").innerHTML=", "+(getstring-seigenmozisuu)+"字オーバー";
                }
              }
              else if(document.getElementById("inaiteido").value=="teido"){
                if(Math.ceil(seigenmozisuu*0.8)>getstring){
                  document.getElementById("sitei").innerHTML=", あと"+(Math.ceil(seigenmozisuu*0.8)-getstring)+"字";
                }
                else if(Math.ceil(seigenmozisuu*0.8)<=getstring&&Math.ceil(seigenmozisuu*1.2)>=getstring){
                  document.getElementById("sitei").innerHTML=", ---OK---"+"MAXまであと"+(Math.ceil(seigenmozisuu*1.2)-getstring)+"字";
                }
                else if((seigenmozisuu*1.2)<getstring){
                  document.getElementById("sitei").innerHTML=", "+(getstring-Math.ceil(seigenmozisuu*1.2))+"字オーバー";
                }
              }
            }
            else{
              document.getElementById("sitei").innerHTML="";
            }
        };
        setInterval("check()",100);
    </script>
 </body>
</html>
